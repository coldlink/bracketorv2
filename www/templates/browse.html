<ion-view view-title="Browse Tournaments">
  <ion-content>
    <div ng-if="!API_KEY">
      <div class="list card">
        <div class="item item-icon-left assertive">
          <i class="icon ion-alert-circled"></i>
          No API Key Found!
        </div>
        <div class="item item-body">
          <p>API key is required to be set before tournaments can be viewed.</p>
          <p>Set the API key in the settings menu.</p>
        </div>
        <a class="item item-icon-left assertive" href="#/app/settings">
          <i class="icon ion-gear-b"></i>
          Go to Settings
        </a>
      </div>
    </div>
    <div ng-if="API_KEY">
      <ul class="collapsible popout z-depth-0" data-collapsible="accordion" watch>
        <li class="z-depth-0">
          <div class="collapsible-header">
            <i></i>Created Tournaments</div>
          <div class="collapsible-body">
            <p class="no-margin-top">View and edit tournaments that you have created.</p>
            <a class="item item-icon-left assertive" ng-click="click('created')">
              <i class="icon ion-log-in"></i>
              Get tournaments
            </a>
          </div>
        </li>
        <li class="z-depth-0">
          <div class="collapsible-header">
            <i></i>Tournaments by Organization</div>
          <div class="collapsible-body">
            <p>Find tournaments created by any organization using a Challonge subdomain.</p>
            <label class="item item-input">
              <input ng-model="subdomain" placeholder="Insert Organization Here" type="text">
            </label>
            <code>
              >
              {{subdomain ? subdomain : '{Organization}'}}.challonge.com
            </code>
            <div ng-if="error" ng-class="error.type ? error.type : 'assertive'" class="item item-text-wrap text-center">
              {{error.message}}
            </div>
            <a class="item item-icon-left assertive" ng-click="click('subdomain', subdomain)">
              <i class="icon ion-log-in"></i>
              Get tournaments
            </a>
          </div>
        </li>
        <li class="z-depth-0">
          <div class="collapsible-header">
            <i></i>Single Tournament</div>
          <div class="collapsible-body">
              <div class="content">
                <p class="no-margin-top">Find a single tournament from a Challonge URL.</p>
              </div>
              <ul class="list">
                <li>
                  <label class="checkbox">
                    <ion-checkbox ng-model="incSubdomain">Include Organization</ion-checkbox>
                  </label>
                </li>
                <li ng-show="incSubdomain">
                  <label class="item item-input">
                    <input ng-model="subdomain" placeholder="Insert Organization Here" type="text">
                  </label>
                </li>
                <br ng-show="incSubdomain">
                <li>
                  <label class="item item-input">
                    <input ng-model="url" placeholder="Insert URL Here" type="text">
                  </label>
                </li>
              </ul>
              <code>
                >
                {{incSubdomain ? (subdomain ? subdomain + '.' : '{Organization}.') : ''}}challonge.com/{{url ? url : '{URL}'}}
              </code>
              <div ng-if="error" ng-class="error.type ? error.type : 'assertive'" class="item item-text-wrap text-center">
                {{error.message}}
              </div>
            <a class="item item-icon-left assertive" ng-click="click('single', subdomain, url, incSubdomain)">
              <i class="icon ion-log-in"></i>
              Get tournament
            </a>
          </div>
        </li>
        <li class="z-depth-0">
          <div class="collapsible-header">
            <i></i>History/Bookmarked</div>
          <div class="collapsible-body">
            <a class="item item-icon-left" ng-click="click('hisTour')">
              <i class="icon ion-clock"></i>
              Tournament History
            </a>
            <a class="item item-icon-left" ng-click="click('favTour')">
              <i class="icon ion-heart"></i>
              Bookmarked Tournaments
            </a>
          </div>
        </li>
      </ul>
    </div>
  </ion-content>
</ion-view>
