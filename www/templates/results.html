<ion-view view-title="Results">
  <ion-content>
    <ion-refresher ng-if="!loading" on-refresh="checkConnection()" pulling-text="Pull to refresh..."></ion-refresher>
    <div class="row" ng-if="loading">
      <div class="col text-center" style="margin-top: 10px">
        <ion-spinner></ion-spinner>
      </div>
    </div>
    <div class="list card" ng-if="!tournament.tournament.group_stages_enabled" ng-repeat="tournament in tournaments | orderBy: tournament.created_at : false">
      <a class="item item-icon-left" ng-click="open(tournament.tournament.id)">
        <i class="icon" ng-class="active === tournament.tournament.id ? 'ion-chevron-down' : 'ion-chevron-right'"></i>
        {{tournament.tournament.name}}
      </a>
      <div class="item item-body" ng-if="active === tournament.tournament.id">
        <div class="row">
          <div class="col text-center">
            <h2>
              <b>{{tournament.tournament.participants_count}}</b>
            </h2>
            <small>Participants</small>
          </div>
          <div class="col text-center">
            <h2>
              <b>{{typeToTwo(tournament.tournament.tournament_type)}}</b>
            </h2>
            <small>Type</small>
          </div>
          <div class="col text-center">
            <h2>
              <b>
                <i class="icon" ng-class="stateToIcon(tournament.tournament.state)"></i>
              </b>
            </h2>
            <small>State</small>
          </div>
        </div>
        <div class="row">
          <!-- <div class="col text-center">
            <progress max="100" value="{{tournament.tournament.progress_meter}}">{{tournament.tournament.progress_meter}}%</progress>
          </div> -->
          <div class="col col-33 text-right">
            <div
                round-progress
                max="100"
                current="tournament.tournament.progress_meter"
                color="#45ccce"
                bgcolor="#eaeaea"
                radius="25"
                stroke="5"
                semi="false"
                rounded="true"
                clockwise="false"
                responsive="false"
                duration="800"
                animation="easeInOutQuart"
                animation-delay="0"></div>
          </div>
          <div class="col text-left">
            <p>
              Progress: {{tournament.tournament.progress_meter}}%
            </p>
          </div>
        </div>
        <div class="row">
          <div class="col text-center">
            <h3>{{tournament.tournament.created_at | date:"yyyy/MM/dd '-' HH:mm 'UTC'Z"}}</h3>
            <small>Created At</small>
          </div>
          <div class="col text-center">
            <h3>{{tournament.tournament.updated_at | date:"yyyy/MM/dd '-' HH:mm 'UTC'Z"}}</h3>
            <small>Last Updated</small>
          </div>
        </div>
      </div>
      <a class="item item-icon-left assertive" ng-click="goToTournament(tournament.tournament.id)" ng-if="active === tournament.tournament.id">
        <i class="icon ion-log-in"></i>
        View tournament
      </a>
    </div>
  </ion-content>
</ion-view>
